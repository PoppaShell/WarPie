<div class="flyout-header">
    <h2>[FILTERS]</h2>
    <button class="flyout-close" onclick="closeFilters()">[X]</button>
</div>

<div class="flyout-content">
    <!-- View Toggle -->
    <div class="view-toggle">
        <button class="toggle-btn active" id="btn-recent" onclick="showRecentFilters()">RECENT</button>
        <button class="toggle-btn" id="btn-all" onclick="showAllFilters()">ALL</button>
    </div>

    <!-- Exclusions Section -->
    <div class="filter-section">
        <h3 class="section-title">EXCLUSIONS</h3>

        <!-- Add Exclusion Form -->
        <div class="add-form">
            <div class="input-row">
                <input type="text" id="ssid-input" class="input" placeholder="Enter SSID...">
                <button class="btn" onclick="scanSSID()">SCAN</button>
            </div>

            <div class="filter-type-row">
                <label class="radio-label">
                    <input type="radio" name="exclusion-type" value="static" checked>
                    <span class="radio-text static">Static</span>
                </label>
                <label class="radio-label">
                    <input type="radio" name="exclusion-type" value="dynamic">
                    <span class="radio-text dynamic">Dynamic</span>
                </label>
            </div>

            <div class="type-hint" id="type-hint">
                Static: Block at capture time. Use for home networks, neighbors.
            </div>

            <!-- Scan Results (hidden by default) -->
            <div class="scan-results hidden" id="scan-results">
                <h4>Found Networks:</h4>
                <div id="found-networks"></div>
                <div class="method-buttons">
                    <button class="btn" onclick="addExclusion('bssid')">ADD BSSIDS</button>
                    <button class="btn btn-secondary" onclick="addExclusion('exact')">SSID ONLY</button>
                </div>
            </div>
        </div>

        <!-- Static Exclusions List -->
        <div class="exclusion-list-container">
            <h4 class="section-title">Static Exclusions</h4>
            <div class="exclusion-list" id="static-exclusion-list"
                 hx-get="/api/filters"
                 hx-trigger="load"
                 hx-swap="innerHTML">
                <div class="loading"><span class="spinner"></span></div>
            </div>
        </div>

        <!-- Dynamic Exclusions List -->
        <div class="exclusion-list-container">
            <h4 class="section-title">Dynamic Exclusions</h4>
            <div class="exclusion-list" id="dynamic-exclusion-list">
                <div class="loading"><span class="spinner"></span></div>
            </div>
        </div>
    </div>

    <hr class="section-divider">

    <!-- Target Lists Section -->
    <div class="filter-section">
        <h3 class="section-title">TARGET LISTS</h3>

        <button class="btn btn-block" onclick="openCreateTargetList()">+ CREATE NEW LIST</button>

        <div class="target-lists" id="target-lists"
             hx-get="/api/targets/lists?view=manage"
             hx-trigger="load"
             hx-swap="innerHTML">
            <div class="loading"><span class="spinner"></span></div>
        </div>
    </div>

    <hr class="section-divider">

    <!-- Actions Section -->
    <div class="filter-section">
        <h3 class="section-title">ACTIONS</h3>

        <div class="btn-row">
            <button class="btn"
                    hx-post="/api/filters/cleanup"
                    hx-confirm="Run retroactive cleanup? This will remove excluded networks from historical logs."
                    hx-indicator="#cleanup-spinner">
                <span class="htmx-indicator" id="cleanup-spinner"><span class="spinner"></span></span>
                CLEANUP
            </button>
            <button class="btn" onclick="openPreUpload()">PRE-UPLOAD</button>
        </div>
    </div>
</div>
