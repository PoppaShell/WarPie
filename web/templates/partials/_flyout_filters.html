<div class="flyout-header">
    <h2>[FILTERS]</h2>
    <button class="flyout-close" onclick="closeFilters()">[X]</button>
</div>

<div class="flyout-content">
    <!-- STATIC EXCLUSIONS SECTION -->
    <div class="filter-section">
        <h3 class="section-title">STATIC EXCLUSIONS</h3>
        <p class="section-desc">Block at capture time via BSSID. For home networks, neighbors with stable MACs.</p>

        <!-- Static Add Form - Needs Scan -->
        <div class="add-form">
            <div class="input-row">
                <input type="text" id="static-ssid-input" class="input" placeholder="Enter SSID to scan...">
                <button class="btn" onclick="scanForStatic()">SCAN</button>
            </div>

            <!-- Scan Results (hidden by default) -->
            <div class="scan-results hidden" id="static-scan-results">
                <h4>Found Networks:</h4>
                <div id="static-found-networks"></div>
            </div>
        </div>

        <!-- Static Exclusions List -->
        <div class="exclusion-list" id="static-exclusion-list"
             hx-get="/api/filters/static"
             hx-trigger="load"
             hx-swap="innerHTML">
            <div class="loading"><span class="spinner"></span></div>
        </div>
    </div>

    <hr class="section-divider">

    <!-- DYNAMIC EXCLUSIONS SECTION -->
    <div class="filter-section">
        <h3 class="section-title">DYNAMIC EXCLUSIONS</h3>
        <p class="section-desc">Removed during post-processing. For networks with rotating MACs (mobile hotspots, etc).</p>

        <!-- Dynamic Add Form - No Scan Needed -->
        <div class="add-form">
            <div class="input-row">
                <input type="text" id="dynamic-ssid-input" class="input" placeholder="SSID or pattern (* = wildcard)">
                <button class="btn" onclick="addDynamicExclusion()">ADD</button>
                <span class="help-icon" title="Wildcard examples:&#10;Guest* - matches Guest, Guest-5G, GuestWiFi&#10;*Hotspot - matches MyHotspot, Phone Hotspot&#10;Net?ork - matches Network, Netw0rk">?</span>
            </div>
        </div>

        <!-- Dynamic Exclusions List -->
        <div class="exclusion-list" id="dynamic-exclusion-list"
             hx-get="/api/filters/dynamic"
             hx-trigger="load"
             hx-swap="innerHTML">
            <div class="loading"><span class="spinner"></span></div>
        </div>
    </div>

    <hr class="section-divider">

    <!-- Target Lists Section -->
    <div class="filter-section">
        <h3 class="section-title">TARGET LISTS</h3>

        <button class="btn btn-block" onclick="openCreateTargetList()">+ CREATE NEW LIST</button>

        <div class="target-lists" id="target-lists"
             hx-get="/api/targets/lists?view=manage"
             hx-trigger="load"
             hx-swap="innerHTML">
            <div class="loading"><span class="spinner"></span></div>
        </div>
    </div>

    <hr class="section-divider">

    <!-- Actions Section -->
    <div class="filter-section">
        <h3 class="section-title">ACTIONS</h3>

        <div class="btn-row">
            <button class="btn"
                    hx-post="/api/filters/cleanup"
                    hx-confirm="Run retroactive cleanup? This will remove excluded networks from historical logs."
                    hx-indicator="#cleanup-spinner">
                <span class="htmx-indicator" id="cleanup-spinner"><span class="spinner"></span></span>
                CLEANUP
            </button>
            <button class="btn" onclick="openPreUpload()">PRE-UPLOAD</button>
        </div>
    </div>
</div>
